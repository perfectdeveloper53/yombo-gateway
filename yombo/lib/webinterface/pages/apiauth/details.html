{% extends "lib/webinterface/fragments/layout.tpl" %}
{% import "lib/webinterface/fragments/macros.tpl" as macros%}

{% block content %}
            <div class="row">
                <div class="col-lg-12">
                    <h1 class="page-header">
                        <a class="success" href="/apiauth/index" aria-label="Delete"><i class="fa fa-arrow-left" aria-hidden="true"></i></a>
                        API Auth Key Information<br>
                        <a class="btn btn-md btn-primary" href="/apiauth/{{apiauth.auth_id}}/edit">Edit API Auth</a>
                        <a class="btn btn-md btn-danger" href="/apiauth/{{apiauth.auth_id}}/delete">Delete API Auth</a>
                    </h1>
                    <p></p>

                </div>
                <!-- /.col-lg-12 -->
            </div>
            <!-- /.row -->

            <div class="row">
                    <div class="col-lg-12 col-md-12">
                        <div class="panel panel-default">
                            <div class="panel-heading">
                                <h3>Details</h3>
                                <label>API Auth Key: &nbsp; {{apiauth.auth_id}}</label>
                            </div>
                            <!-- /.panel-heading -->
                            <div class="panel-body">
                                <label style="margin-top: 0px; margin-bottom: 0px">Label: </label><br>
                                {{ apiauth.label }}<br>
                                <label style="margin-top: 15px; margin-bottom: 0px">Description: </label><br>
                                {{ apiauth.description }}<br>
                                <label style="margin-top: 15px; margin-bottom: 0px">Is Valid: </label><br>
                                {{ apiauth.is_valid }}<br>
                                <label style="margin-top: 15px; margin-bottom: 0px">Last Access: </label><br>
                                {{ apiauth.last_access|epoch_to_human }}<br>
                                <label style="margin-top: 15px; margin-bottom: 0px">Updated: </label><br>
                                {{ apiauth.updated_at|epoch_to_human }}<br>
                                <label style="margin-top: 15px; margin-bottom: 0px">Created: </label><br>
                                {{ apiauth.created_at|epoch_to_human }}<br>
                            </div>
                        </div>
                        <div class="panel panel-default">
                            <div class="panel-heading">
                                <label>Roles</label>
                                This API Auth token has the following roles.
                            </div>
                            <!-- /.panel-heading -->
                            <div class="panel-body">
                    <table width="100%" class="table table-striped table-bordered table-hover" id="roles">
                        <thead>
                            <tr>
                                <th>Label</th><th>Description</th>
                            </tr>
                        </thead>
                        <tbody>
                        {%- for label in apiauth.roles %}
                            {%- set role = _users.get_role(label) %}
                            {%- if role == 'none' %}{% continue %}{% endif %}
                             <tr>
                                 <td data-priority="1"><a href="/roles/{{role.role_id}}/details">{{ role.label }}</a></td>
                                <td data-priority="1">{{ role.description }}</td>
                             </tr>{% endfor %}
                        </tbody>
                    </table>
                            </div>
                        </div>
                        <div class="panel panel-default">
                            <div class="panel-heading">
                                <label>Debug details</label>
                                 - These can be ignored.
                            </div>
                            <!-- /.panel-heading -->
                            <div class="panel-body">
                                <label style="margin-top: 0px; margin-bottom: 0px">Is Dirty: </label><br>
                                {{ apiauth.is_dirty }}<br>
                                <label style="margin-top: 15px; margin-bottom: 0px">In Db: </label><br>
                                {{ apiauth.in_db }}<br>
                            </div>
                        </div>
                    </div>
                    <!-- /.panel-body -->
                </div>
            </div>
            <!-- /.row -->
{% endblock %}

